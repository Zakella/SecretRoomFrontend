@keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
@keyframes shimmer { 0% { background-position: 100% 50%; } 100% { background-position: -100% 50%; } }
@keyframes fadeInUp { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

.cart-drawer { width: 90vw; max-width: 850px; height: 100%; background: linear-gradient(180deg, #fefcf8, #fff); box-shadow: -8px 0 40px rgba(0, 0, 0, 0.15); animation: slideIn 0.4s cubic-bezier(0.2, 1, 0.3, 1); display: flex; max-height: 100vh; overflow: hidden;
  .cart-suggestions { width: 30%; background: linear-gradient(180deg, #f8f4f0, #faf7f5); padding: 1.5rem; border-right: 1px solid rgba(181, 133, 95, 0.1);
    h3 { font-family: var(--font-title), serif; font-size: 0.85rem; font-weight: 600; letter-spacing: 0.15em; margin-bottom: 1.5rem; color: #4b3e2b; text-transform: uppercase; position: relative; padding-bottom: 0.75rem;
      &::after { content: ''; position: absolute; bottom: 0; left: 0; width: 40px; height: 2px; background: linear-gradient(90deg, #b5855f, #d4a574); }
    }
    .suggested-item { margin-bottom: 2rem; text-align: center;
      img { width: 70px; height: 90px; object-fit: cover; margin: 0 auto 0.75rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); transition: transform 0.3s; &:hover { transform: scale(1.05); } }
      .title { font-size: 0.75rem; font-weight: 500; color: #4b3e2b; line-height: 1.4; margin-bottom: 0.25rem; }
      .price { font-size: 0.85rem; color: #b5855f; font-weight: 600; margin: 0.5rem 0; }
      .btn-add { background: transparent; color: #4b3e2b; padding: 0.5rem 1rem; border: 1.5px solid rgba(181, 133, 95, 0.4); font-size: 0.7rem; font-weight: 600; letter-spacing: 0.1em; cursor: pointer; border-radius: 4px; transition: all 0.3s; text-transform: uppercase;
        &:hover { background: linear-gradient(135deg, #fdf6ff, #fffaf5); border-color: #b5855f; }
      }
    }
  }
  .cart-content { width: 70%; background: linear-gradient(180deg, #fff, #fefcf8); padding: 2rem; display: flex; flex-direction: column;
    .cart-header { display: flex; justify-content: space-between; align-items: center; padding-bottom: 1rem; border-bottom: 1px solid rgba(181, 133, 95, 0.15); margin-bottom: 1rem;
      h2 { font-family: var(--font-title), serif; font-size: 1.4rem; font-weight: 600; color: #2d2a26; }
      .btn-close { background: none; border: none; color: #4b3e2b; font-size: 1.5rem; cursor: pointer; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: all 0.3s;
        &:hover { background: rgba(181, 133, 95, 0.1); color: #b5855f; }
      }
    }
    .cart-welcome { font-size: 0.9rem; margin: 0.5rem 0 1.5rem; color: #8a7a6b; font-style: italic; }
    .free-shipping-bar { font-size: 0.85rem; background: linear-gradient(135deg, #fef8f5, #fff5f0); padding: 1rem 1.25rem; margin-bottom: 1.5rem; color: #4b3e2b; border-radius: 10px; border: 1px solid rgba(181, 133, 95, 0.15);
      p { margin: 0 0 0.75rem; } strong { color: #b5855f; }
      .progress-bar { height: 6px; background: rgba(181, 133, 95, 0.15); border-radius: 3px; overflow: hidden;
        .progress { height: 100%; background: linear-gradient(90deg, #d4a574, #b5855f); border-radius: 3px; transition: width 0.5s; position: relative;
          &::after { content: ''; position: absolute; inset: 0; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4) 50%, transparent); background-size: 200% 100%; animation: shimmer 2s infinite; }
        }
      }
    }
    .cart-items { border-top: 1px solid rgba(181, 133, 95, 0.1); padding-top: 1.5rem; margin-bottom: 1rem; flex: 1; overflow-y: auto;
      &::-webkit-scrollbar { width: 4px; }
      &::-webkit-scrollbar-track { background: #f5f0eb; }
      &::-webkit-scrollbar-thumb { background: rgba(181, 133, 95, 0.3); &:hover { background: rgba(181, 133, 95, 0.5); } }
      .cart-item { display: flex; align-items: flex-start; gap: 1.25rem; margin-bottom: 1.5rem; padding: 1rem; position: relative; background: rgba(255, 255, 255, 0.6); border-radius: 12px; border: 1px solid rgba(181, 133, 95, 0.08); transition: all 0.3s;
        &:hover { background: rgba(255, 255, 255, 0.9); box-shadow: 0 4px 16px rgba(181, 133, 95, 0.1); }
        img { width: 70px; height: 90px; object-fit: cover; border-radius: 8px; box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08); transition: transform 0.3s; &:hover { transform: scale(1.03); } }
        .item-info { flex: 1; padding-top: 0.25rem;
          .title { color: #2d2a26; font-size: 0.95rem; font-weight: 500; line-height: 1.4; margin-bottom: 0.5rem; }
          .qty-controls { display: flex; align-items: center; gap: 0.5rem; margin-top: 0.75rem;
            span { color: #4b3e2b; font-weight: 500; }
            button { width: 28px; height: 28px; border: 1px solid rgba(181, 133, 95, 0.3); background: transparent; cursor: pointer; color: #4b3e2b; border-radius: 4px; transition: all 0.3s; display: flex; align-items: center; justify-content: center;
              &:hover { background: rgba(181, 133, 95, 0.1); border-color: #b5855f; }
            }
          }
        }
        .price { font-size: 1rem; font-weight: 600; color: #b5855f; padding-top: 0.25rem; }
        .btn-remove { color: #8a7a6b; background: none; border: none; width: 28px; height: 28px; font-size: 1.4rem; position: absolute; top: 0.5rem; right: 0.5rem; cursor: pointer; border-radius: 50%; transition: all 0.3s; display: flex; align-items: center; justify-content: center;
          &:hover { background: rgba(181, 133, 95, 0.1); color: #b5855f; }
        }
      }
    }
    .gift-wrap { font-size: 0.85rem; margin-bottom: 1rem; color: #4b3e2b; input { margin-right: 0.5rem; accent-color: #b5855f; } }
    .cart-footer { margin-top: auto; padding-top: 1.5rem; border-top: 1px solid rgba(181, 133, 95, 0.15);
      span { color: #4b3e2b; }
      .subtotal { display: flex; justify-content: space-between; font-size: 0.95rem; font-weight: 500; margin-bottom: 0.75rem; color: #4b3e2b;
        &:last-of-type { font-size: 1.1rem; font-weight: 600; margin-bottom: 1.25rem; padding-top: 0.75rem; border-top: 1px solid rgba(181, 133, 95, 0.1); span:last-child { color: #b5855f; } }
      }
      .btn-checkout { width: 100%; background: linear-gradient(135deg, #2d2a26, #1a1816); color: #f5f0eb; border: none; padding: 1rem 1.5rem; font-size: 0.9rem; font-weight: 600; letter-spacing: 0.12em; cursor: pointer; text-transform: uppercase; border-radius: 6px; transition: all 0.4s; box-shadow: 0 4px 15px rgba(45, 42, 38, 0.2); position: relative; overflow: hidden;
        &::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(181, 133, 95, 0.2), transparent); transition: left 0.5s; }
        &:hover { background: linear-gradient(135deg, #4b3e2b, #2d2a26); box-shadow: 0 6px 20px rgba(45, 42, 38, 0.3); transform: translateY(-2px); &::before { left: 100%; } }
      }
      .installments { font-size: 0.75rem; text-align: center; margin-top: 0.75rem; color: #8a7a6b; font-style: italic; }
    }
  }
}

.drawer-backdrop { position: fixed; inset: 0; background-color: rgba(0, 0, 0, 0.5); backdrop-filter: blur(4px); z-index: 1000; display: flex; justify-content: flex-end; animation: fadeIn 0.3s ease; }

@media (max-width: 768px) {
  .cart-drawer { flex-direction: column; width: 100vw; max-width: 100vw;
    .cart-suggestions { order: 2; width: 100%; padding: 1rem; display: flex; gap: 1rem; overflow-x: auto; border-right: none; border-top: 1px solid rgba(181, 133, 95, 0.1);
      h3 { display: none; }
      .suggested-item { min-width: 120px; margin-bottom: 0; }
    }
    .cart-content { order: 1; width: 100%; padding: 1.5rem; max-height: 70vh; overflow-y: auto; }
  }
}

.cart-empty { padding: 3rem 2rem; text-align: center; display: flex; flex-direction: column; align-items: center; gap: 1.25rem; animation: fadeInUp 0.6s ease;
  .icon { font-size: 4rem; opacity: 0.4; }
  p { font-family: var(--font-title), serif; font-size: 1.15rem; color: #4b3e2b; margin: 0; font-style: italic; }
  .btn-shop { margin-top: 1rem; padding: 0.9rem 2rem; border: 1.5px solid rgba(181, 133, 95, 0.4); background: transparent; color: #4b3e2b; border-radius: 6px; cursor: pointer; font-size: 0.8rem; font-weight: 600; letter-spacing: 0.12em; text-transform: uppercase; transition: all 0.4s;
    &:hover { background: linear-gradient(135deg, #2d2a26, #1a1816); color: #f5f0eb; border-color: transparent; box-shadow: 0 4px 15px rgba(45, 42, 38, 0.2); }
  }
}

:host ::ng-deep {
  .p-inputtext:enabled:focus { border-color: rgba(181, 133, 95, 0.5) !important; box-shadow: 0 0 0 2px rgba(181, 133, 95, 0.1) !important; }
  .p-button-text { color: #4b3e2b !important; &:hover { background: rgba(181, 133, 95, 0.1) !important; color: #b5855f !important; } }
  .p-inputnumber-input { color: #4b3e2b !important; }
}
