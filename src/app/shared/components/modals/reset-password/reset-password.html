<p-dialog
  [header]="'forgotPassword.title' | transloco"
  [(visible)]="isVisible"
  [modal]="true"
  [closable]="true"
  [style]="{width: '420px'}"
  [styleClass]="'sr-reset-dialog'"
  (onHide)="onClose()"
>
  @if (successMessage()) {
    <div class="success-block">
      <div class="success-icon">
        <i class="pi pi-check"></i>
      </div>
      <p>{{ successMessage() | transloco }}</p>
    </div>
  } @else {
    <p class="modal-description">{{ 'forgotPassword.description' | transloco }}</p>

    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="form-field">
        <label for="reset-email">Email</label>
        <input
          id="reset-email"
          type="email"
          formControlName="email"
          placeholder="email@example.com"
          autocomplete="email"
        />
        @if (form.controls['email'].invalid && form.controls['email'].touched) {
          <small class="error-text">{{ 'forgotPassword.invalidEmail' | transloco }}</small>
        }
      </div>

      <p-button
        type="submit"
        [label]="submitting() ? ('forgotPassword.sending' | transloco) : ('forgotPassword.submit' | transloco)"
        [disabled]="form.invalid || submitting()"
        [loading]="submitting()"
        styleClass="w-full"
      />
    </form>
  }
</p-dialog>
