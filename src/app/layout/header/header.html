<header class="header">
  <div class="header-top">
    <nav class="nav-left">
      <a class="nav-item">Our Story</a>
      <a class="nav-item">Our Standards</a>
      <a class="nav-item" [routerLink]="['/', activeLang(), 'contacts']">Our Stores & Services</a>
    </nav>
    <a [routerLink]="['/', activeLang()]" class="logo">
      <img src="assets/images/SR-white.svg" alt="logo">
    </a>
    <div class="nav-right">
      <div class="lang-switcher">
        @for (lang of languages; track lang) {
          <button (click)="setActiveLang(lang)" [class.active]="lang === activeLang()">
            {{ lang.toUpperCase() }}
          </button>
        }
      </div>
      <div class="icons">
        <a class="icon">
          <i [routerLink]="['/', activeLang(), 'wishlist']" class="ri-heart-line"></i>
        </a>
        <a class="icon">
          <i [routerLink]="['/', activeLang(), 'cabinet']" class="ri-user-line"></i>
        </a>
        <a class="icon cart-icon" (click)="openCart()">
          <i class="ri-shopping-bag-line"></i>
          @if (cartCount() > 0) {
            <span class="cart-badge">{{ cartCount() }}</span>
          }
        </a>
      </div>
    </div>
  </div>
  <div class="header-medium">
    <nav class="nav-left">
      @for (item of headerItems(); track item.id) {
        <a class="nav-medium-item" [class.active]="activeBrand()?.id === item.id" (click)="setActive(item)">
          {{ item.name }}
        </a>
      }
    </nav>
  </div>
  <nav
    class="nav-main"
    (mouseenter)="navHovered.set(true)"
    (mouseleave)="closeDropdown()"
  >
    @if (activeBrand()?.children) {
      @for (category of activeBrand()!.children!; track category.id) {
        <a
          class="nav-item"
          (mouseenter)="showDropdown(category)"
        >
          {{ category.name }}
        </a>
      }
    }

    @if (activeCategory()?.children?.length) {
      <div class="dropdown"   [class.visible]="activeCategory()">
        <div class="dropdown-content">
          <div class="dropdown-section">
            <h4>{{ activeCategory()!.name }}</h4>
          </div>

          <div class="dropdown-section">
            <h4>SHOP BY</h4>
            @for (sub of activeCategory()!.children!; track sub.id) {
              <a class="dropdown-item">
                {{ sub.name }}
              </a>
            }
          </div>
        </div>
      </div>
    }

    <div class="search-bar">
      <input type="text"
             maxlength="60"
             (keyup.enter)="onSearch()"
             [(ngModel)]="query"
             [placeholder]="'Search'| transloco"
             aria-label="Поиск по продуктам">
      <i class="ri-search-line" aria-hidden="true"></i>
    </div>
  </nav>
</header>


