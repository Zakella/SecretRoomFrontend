<header class="header">
  <div class="header-top">
    <div class="header-top-inner">
      <nav class="nav-left">
        <a class="nav-item nav-item--luxury" [routerLink]="['/', activeLang(), 'contacts']">
          <i class="ri-map-pin-line"></i>
          <span>{{'Stores' | transloco}}</span>
        </a>
        <a class="nav-item nav-item--luxury" [routerLink]="['/', activeLang(), 'about-the-secret-room']">
          <i class="ri-instagram-line"></i>
          <span>{{'Instagram' | transloco}}</span>
        </a>
      </nav>
      <div class="logo-scroll-wrapper" [class.visible]="isHidden">
        <ng-container *ngTemplateOutlet="logo"/>
      </div>
      <div class="nav-right">
        <div class="icons">
          <a class="icon">
            <i [routerLink]="['/', activeLang(), 'wishlist']" class="ri-heart-line"></i>
          </a>
          <a class="icon">
            <i [routerLink]="['/', activeLang(), 'cabinet']" class="ri-user-line"></i>
          </a>
          <a class="icon cart-icon" (click)="openCart()">
            <i class="ri-shopping-bag-line"></i>
            @if (cartCount() > 0) {
              <span class="cart-badge">{{ cartCount() }}</span>
            }
          </a>
        </div>
      </div>
    </div>
  </div>
  <div class="header-medium" [class.hidden]="isHidden"
       [ngStyle]="{'padding': isMinBrands() ? '10px 420px' : '10px 150px'}">

    <div class="logo-search-row">
      <div class="row-left">
        <div class="lang-switch">
          @for (lang of languages; track lang) {
            <div class="lang-option" [class.active]="activeLang() === lang" (click)="setActiveLang(lang)">
              {{ lang | uppercase }}
            </div>
          }
        </div>
      </div>

      <ng-container *ngTemplateOutlet="logo"/>

      <div class="row-right">
        <div class="search-bar">
          <input
            type="text"
            maxlength="60"
            (keyup.enter)="onSearch()"
            [(ngModel)]="query"
            [placeholder]="'Search' | transloco"
            aria-label="Поиск по продуктам"
          />
          <i class="ri-search-line" aria-hidden="true"></i>
        </div>
      </div>
    </div>

    <div class="brands-row">
      <nav class="nav-left">
        @for (item of headerItems(); track item.id) {
          <a class="nav-medium-item" [class.active]="activeBrand()?.id === item.id" (click)="setActive(item)">
            {{ item.name }}
          </a>
        }
      </nav>
    </div>
  </div>


  <nav class="nav-main" (mouseenter)="navHovered.set(true)" (mouseleave)="closeDropdown()">
    <div class="nav-inner">
      @if (activeBrand()?.children) {
        @for (category of activeBrand()!.children!; track category.id) {
          <a class="category-text" (mouseenter)="showDropdown(category)">
            {{ category.name }}
          </a>
        }
      }
      @if (activeCategory()?.children?.length) {
        <div class="dropdown" [class.visible]="activeCategory()">
          <div class="dropdown-content">
            <div class="dropdown-left">
              <div class="dropdown-section">
                <h4>{{ activeCategory()!.name }}</h4>
              </div>
              <div class="dropdown-section">
                @for (sub of activeCategory()!.children!; track sub.id) {
                  <a class="dropdown-item">{{ sub.name }}</a>
                }
              </div>
            </div>
            <div class="dropdown-right">
              <img src="https://90-60-90.in.ua/images/MODELING/MAIN-PHOTO/vs-angels3.jpg"/>
            </div>
          </div>
        </div>
      }
    </div>
  </nav>
</header>

<ng-template #logo><a [routerLink]="['/', activeLang()]" class="logo">Secret Room</a>
</ng-template>
