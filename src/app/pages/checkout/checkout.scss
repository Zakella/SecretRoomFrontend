@keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
@keyframes spin { to { transform: rotate(360deg); } }

.checkout-page { min-height: 100vh; background: linear-gradient(180deg, #FAF5F8, #fefcf8); padding: 200px 20px 60px; }
.checkout-container { display: flex; gap: 50px; max-width: 1200px; margin: 0 auto; }

.checkout-form { flex: 1 1 60%; max-width: 680px;
  .checkout-title { font-family: var(--font-title), serif; font-size: 2.2rem; font-weight: 600; color: #2d2a26; margin-bottom: 2rem; }
}

.steps { display: flex; align-items: center; gap: 1rem; margin-bottom: 2.5rem; padding-bottom: 1.5rem; border-bottom: 1px solid rgba(181,133,95,.15);
  span:not(.step-divider):not(.step-number) { display: flex; align-items: center; gap: .5rem; font-size: .9rem; font-weight: 500; color: #8a7a6b; cursor: pointer;
    &:hover { color: #b5855f; }
    &.active { color: #2d2a26; font-weight: 600; .step-number { background: linear-gradient(135deg,#b5855f,#d4a574); color: #fff; } }
    &.completed { color: #b5855f; .step-number { background: rgba(181,133,95,.15); color: #b5855f; } }
  }
  .step-number { display: flex; align-items: center; justify-content: center; width: 28px; height: 28px; border-radius: 50%; background: rgba(181,133,95,.1); color: #8a7a6b; font-size: .8rem; font-weight: 600; }
  .step-divider { flex: 1; height: 1px; background: linear-gradient(90deg,rgba(181,133,95,.3),rgba(181,133,95,.1)); max-width: 60px; }
}

.form-section { margin-bottom: 2rem;
  .section-title { font-family: var(--font-title), serif; font-size: 1.15rem; font-weight: 600; color: #2d2a26; margin-bottom: 1.25rem; padding-bottom: .75rem; border-bottom: 2px solid rgba(181,133,95,.2); position: relative;
    &::after { content: ''; position: absolute; bottom: -2px; left: 0; width: 60px; height: 2px; background: linear-gradient(90deg,#b5855f,#d4a574); }
  }
}

.form-row { display: flex; gap: 1rem; }
.form-group { margin-bottom: 1.25rem;
  &.half { flex: 1; }
  label { display: block; font-size: .85rem; font-weight: 500; color: #4b3e2b; margin-bottom: .5rem; }
  input, select, textarea { width: 100%; padding: .9rem 1rem; font-size: .95rem; color: #2d2a26; background: #fff; border: 1.5px solid rgba(181,133,95,.25); border-radius: 8px; outline: none;
    &::placeholder { color: #b5a99a; }
    &:focus { border-color: #b5855f; box-shadow: 0 0 0 3px rgba(181,133,95,.1); }
    &.invalid { border-color: #c9544d; background: #fff8f7; }
    &.disabled { background: #f5f0eb; color: #8a7a6b; }
  }
  textarea { resize: vertical; min-height: 100px; }
  .error-message { display: block; font-size: .8rem; color: #c9544d; margin-top: .4rem; }
}

.shipping-options, .payment-options { display: flex; flex-direction: column; gap: 1rem; }
.shipping-option, .payment-option { display: flex; align-items: flex-start; gap: 1rem; padding: 1.25rem; background: #fff; border: 1.5px solid rgba(181,133,95,.2); border-radius: 12px; cursor: pointer;
  &:hover { border-color: rgba(181,133,95,.4); }
  &.selected { border-color: #b5855f; background: linear-gradient(135deg,#fffaf7,#fff); }
  .option-radio { flex-shrink: 0; width: 22px; height: 22px; border: 2px solid rgba(181,133,95,.3); border-radius: 50%; display: flex; align-items: center; justify-content: center;
    .radio-dot { width: 12px; height: 12px; background: linear-gradient(135deg,#b5855f,#d4a574); border-radius: 50%; }
  }
  .option-info { flex: 1; display: flex; flex-direction: column; gap: .3rem;
    .option-name { font-weight: 600; color: #2d2a26; font-size: .95rem; }
    .option-description { font-size: .85rem; color: #8a7a6b; }
    .option-delivery { font-size: .8rem; color: #b5855f; font-weight: 500; }
  }
  .option-price { font-weight: 600; color: #4b3e2b; .free-shipping { color: #5a9e5a; } }
  .payment-icon { font-size: 1.4rem; color: #b5855f; }
}

.free-shipping-hint { display: flex; align-items: center; gap: .5rem; padding: .75rem 1rem; background: linear-gradient(135deg,#fef8f5,#fff5f0); border-radius: 8px; margin-top: 1rem; font-size: .85rem; color: #b5855f; }

.agreement-section .checkbox-label { display: flex; align-items: flex-start; gap: .75rem; cursor: pointer;
  input[type="checkbox"] { margin: 0; accent-color: #b5855f; width: 18px; height: 18px; }
  .label-text { font-size: .9rem; color: #4b3e2b; a { color: #b5855f; text-decoration: underline; } }
}

.step-navigation { display: flex; justify-content: space-between; gap: 1rem; margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid rgba(181,133,95,.1); }

.btn-back, .btn-continue, .btn-submit { display: flex; align-items: center; gap: .5rem; padding: 1rem 1.75rem; font-size: .9rem; font-weight: 600; border-radius: 8px; cursor: pointer; border: none; }
.btn-back { background: transparent; color: #4b3e2b; border: 1.5px solid rgba(181,133,95,.3); &:hover { border-color: #b5855f; } }
.btn-continue { background: linear-gradient(135deg,#2d2a26,#1a1816); color: #f5f0eb; margin-left: auto; &:disabled { opacity: .5; } }
.btn-submit { background: linear-gradient(135deg,#b5855f,#d4a574); color: #fff; min-width: 180px; justify-content: center; &:disabled { opacity: .6; }
  .spinner { width: 18px; height: 18px; border: 2px solid rgba(255,255,255,.3); border-top-color: #fff; border-radius: 50%; animation: spin .8s linear infinite; }
}

.order-summary { flex: 1 1 35%; max-width: 400px; background: #fff; border: 1px solid rgba(181,133,95,.15); border-radius: 16px; padding: 1.75rem; height: fit-content; position: sticky; top: 180px;
  .summary-title { font-family: var(--font-title), serif; font-size: 1.15rem; font-weight: 600; color: #2d2a26; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid rgba(181,133,95,.15); }
}

.cart-items { max-height: 350px; overflow-y: auto; margin-bottom: 1.5rem;
  &::-webkit-scrollbar { width: 4px; }
  &::-webkit-scrollbar-thumb { background: rgba(181,133,95,.3); }
}

.cart-item { display: flex; gap: 1rem; padding: 1rem 0; border-bottom: 1px solid rgba(181,133,95,.1);
  &:last-child { border-bottom: none; }
  .item-image { position: relative; flex-shrink: 0;
    img { width: 70px; height: 90px; object-fit: cover; border-radius: 8px; }
    .item-quantity-badge { position: absolute; top: -6px; right: -6px; width: 22px; height: 22px; background: linear-gradient(135deg,#b5855f,#d4a574); color: #fff; font-size: .75rem; font-weight: 600; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
  }
  .item-details { flex: 1; min-width: 0;
    .item-name { font-size: .85rem; font-weight: 500; color: #2d2a26; margin: 0 0 .25rem; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; line-height: 1.3; }
    .item-size { font-size: .8rem; color: #8a7a6b; margin: 0 0 .5rem; }
    .item-actions { display: flex; align-items: center; gap: .5rem; }
    .btn-remove { background: none; border: none; color: #c9544d; cursor: pointer; padding: .4rem; opacity: .7; &:hover { opacity: 1; } }
  }
  .item-price { font-weight: 600; color: #b5855f; flex-shrink: 0; font-size: .9rem; }
}

.summary-totals { padding-top: 1rem; border-top: 1px solid rgba(181,133,95,.15);
  .total-row { display: flex; justify-content: space-between; padding: .6rem 0; font-size: .9rem; color: #4b3e2b;
    &.grand-total { padding-top: 1rem; margin-top: .5rem; border-top: 1px solid rgba(181,133,95,.15); font-size: 1.1rem; font-weight: 600; span:last-child { color: #b5855f; } }
    .free-shipping-text { color: #5a9e5a; }
  }
}

:host ::ng-deep .p-inputnumber {
  .p-inputtext { width: 40px !important; text-align: center !important; padding: .4rem !important; background: transparent !important; border: 1px solid rgba(181,133,95,.2) !important; border-radius: 4px !important; color: #2d2a26 !important; }
  .qty-btn { background: transparent !important; color: #4b3e2b !important; border: none !important; }
}

@media (max-width: 992px) { .checkout-container { flex-direction: column; } .checkout-form { max-width: 100%; } .order-summary { max-width: 100%; position: static; order: -1; margin-bottom: 2rem; } }
@media (max-width: 600px) { .checkout-page { padding: 180px 15px 40px; } .steps { flex-wrap: wrap; .step-divider { display: none; } } .form-row { flex-direction: column; gap: 0; } .step-navigation { flex-direction: column; .btn-back { order: 2; } .btn-continue, .btn-submit { width: 100%; justify-content: center; margin-left: 0; } } }
