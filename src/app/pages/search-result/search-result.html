<div class="search-result-header">
  <div class="search-result-info">
    {{ 'SearchResult' | transloco }}: "{{ query() }}" â€” {{ totalElements() }} {{ 'Items' | transloco }}
  </div>

  <div class="view-toggle">
    <button [class.active]="viewMode === 'grid'" (click)="viewMode = 'grid'">Cells</button>
    <div class="divider"></div>
    <button [class.active]="viewMode === 'list'" (click)="viewMode = 'list'">Rows</button>
  </div>
</div>

<main class="p-6 md:p-12">
  @if (loading() && products().length === 0) {
    <div class="flex justify-center py-20">
      <div class="w-8 h-8 border-2 border-gray-300 border-t-black rounded-full animate-spin"></div>
    </div>
  } @else if (products().length === 0) {
    <div class="text-center py-20 text-gray-400 text-sm uppercase tracking-widest">
      {{ 'NothingFound' | transloco }}
    </div>
  } @else {
    @if (viewMode === 'grid') {
      <product-list [products]="products()"/>
    } @else {
      <div class="space-y-2">
        @for (item of products(); track item.id) {
          <div
            class="group flex items-center p-4 bg-white/40 border border-black/5 hover:bg-white hover:shadow-2xl transition-all duration-300">
            <div class="w-24 h-24 bg-gray-100 flex-shrink-0 overflow-hidden">
              <img [src]="item.imageURL || 'assets/images/no-image.png'"
                   [alt]="item.name"
                   loading="lazy"
                   class="w-full h-full object-cover mix-blend-multiply grayscale group-hover:grayscale-0 transition-all">
            </div>

            <div class="flex-1 px-12 grid grid-cols-3 items-center">
              <div>
                <span class="text-[9px] block opacity-40 uppercase tracking-widest">Product</span>
                <h3 class="text-lg uppercase tracking-tight">{{ item | localizedName }}</h3>
              </div>
              <div>
                <span class="text-[9px] block opacity-40 uppercase tracking-widest">Origin</span>
                <p class="italic text-sm font-serif">{{ item.brandAlias || item.brand }}</p>
              </div>
              <div class="text-right">
                <span class="text-2xl font-light">{{ item.price }} MDL</span>
              </div>
            </div>
          </div>
        }
      </div>
    }

    @if (hasMore()) {
      <div class="flex justify-center mt-12">
        <button
          (click)="loadMore()"
          [disabled]="loading()"
          class="px-10 py-3 border border-black text-[11px] uppercase tracking-[0.2em] hover:bg-black hover:text-white transition-all duration-300 disabled:opacity-50">
          @if (loading()) {
            <span class="inline-block w-4 h-4 border-2 border-gray-400 border-t-black rounded-full animate-spin"></span>
          } @else {
            {{ 'LoadMore' | transloco }}
          }
        </button>
      </div>
    }
  }
</main>
